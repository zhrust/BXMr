# BXMr Makefile
# rIME-Squirrel BXM code table management tool
# è¡¨å½¢ç ç®¡ç†å·¥å…·
#
# Usage: make [target]
# Run 'make' or 'make help' to see available commands

.PHONY: all help build release run clean test doc doc-open clippy check fmt fmt-check install

# Default: show help
all: help

#============================================================================
#  ğŸ“– HELP / å¸®åŠ©
#============================================================================

help:
	@echo ""
	@echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
	@echo "â•‘               BXMr - è¡¨å½¢ç ç®¡ç†å·¥å…· Makefile                    â•‘"
	@echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
	@echo ""
	@echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
	@echo "â”‚ ğŸš€ å¼€å‘ / Development                                          â”‚"
	@echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
	@echo "â”‚  make build     å¼€å‘æ„å»º (debug mode)                          â”‚"
	@echo "â”‚  make run       è¿è¡Œåº”ç”¨                                       â”‚"
	@echo "â”‚  make fmt       æ ¼å¼åŒ–ä»£ç  (rustfmt)                           â”‚"
	@echo "â”‚  make clippy    è¿è¡Œ Clippy é™æ€åˆ†æ                           â”‚"
	@echo "â”‚  make check     å®Œæ•´æ£€æŸ¥ (fmt + clippy + build)                â”‚"
	@echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
	@echo ""
	@echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
	@echo "â”‚ ğŸ§ª æµ‹è¯• / Testing                                              â”‚"
	@echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
	@echo "â”‚  make test      è¿è¡Œå•å…ƒæµ‹è¯•                                   â”‚"
	@echo "â”‚  make fmt-check æ£€æŸ¥ä»£ç æ ¼å¼ (CI ç”¨)                           â”‚"
	@echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
	@echo ""
	@echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
	@echo "â”‚ ğŸ“¦ å‘å¸ƒ / Release                                              â”‚"
	@echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
	@echo "â”‚  make release   å‘å¸ƒæ„å»º (optimized)                           â”‚"
	@echo "â”‚  make install   å®‰è£…åˆ° ~/.cargo/bin                            â”‚"
	@echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
	@echo ""
	@echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
	@echo "â”‚ ğŸ“š æ–‡æ¡£ / Documentation                                        â”‚"
	@echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
	@echo "â”‚  make doc       ç”Ÿæˆ Rustdoc æ–‡æ¡£                              â”‚"
	@echo "â”‚  make doc-open  ç”Ÿæˆå¹¶æ‰“å¼€æ–‡æ¡£                                 â”‚"
	@echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
	@echo ""
	@echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
	@echo "â”‚ ğŸ§¹ ç»´æŠ¤ / Maintenance                                          â”‚"
	@echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
	@echo "â”‚  make clean     æ¸…ç†æ„å»ºäº§ç‰©                                   â”‚"
	@echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
	@echo ""

#============================================================================
#  ğŸš€ å¼€å‘ / Development
#============================================================================

# Development build (debug mode)
build:
	@echo "ğŸ”¨ Building (debug)..."
	cargo build

# Run the application
run:
	@echo "ğŸš€ Running BXMr..."
	cargo run

# Format code with rustfmt
fmt:
	@echo "âœ¨ Formatting code..."
	cargo fmt

# Run clippy linter with warnings as errors
clippy:
	@echo "ğŸ” Running Clippy..."
	cargo clippy -- -D warnings

# Run all checks (fmt, clippy, build)
check: fmt clippy build
	@echo "âœ… All checks passed!"

#============================================================================
#  ğŸ§ª æµ‹è¯• / Testing
#============================================================================

# Run tests
test:
	@echo "ğŸ§ª Running tests..."
	cargo test

# Format check (for CI)
fmt-check:
	@echo "ğŸ“‹ Checking format..."
	cargo fmt --check

#============================================================================
#  ğŸ“¦ å‘å¸ƒ / Release
#============================================================================

# Release build with optimizations
release:
	@echo "ğŸ“¦ Building release..."
	cargo build --release
	@echo "âœ… Release binary: target/release/bxmr"

# Install to ~/.cargo/bin
install:
	@echo "ğŸ“¥ Installing to ~/.cargo/bin..."
	cargo install --path .

#============================================================================
#  ğŸ“š æ–‡æ¡£ / Documentation
#============================================================================

# Generate documentation
doc:
	@echo "ğŸ“š Generating documentation..."
	cargo doc --no-deps

# Generate and open documentation
doc-open:
	@echo "ğŸ“š Generating and opening documentation..."
	cargo doc --no-deps --open

#============================================================================
#  ğŸ§¹ ç»´æŠ¤ / Maintenance
#============================================================================

# Clean build artifacts
clean:
	@echo "ğŸ§¹ Cleaning..."
	cargo clean
